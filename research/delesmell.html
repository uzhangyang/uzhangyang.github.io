<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>DeleSmell</title>
        <style type="text/css">
        pre code
		{
        color:rgb(127, 0, 85);
        line-height:1.4;
	    font-family:Consolas;
        }

        pre comment
		{
        color:rgb(63, 127, 95);
        line-height:1.4;
	    font-family:Consolas;
		}

        pre	{
	    margin: 0;
        padding-left: 5px;
        padding-top: 5px;
        padding-bottom: 5px;
	    border: 0;
	    border: 1px dotted #785;
	    background: #f5f5f5;
	    line-height:1.4;
	    font-family:Consolas;
        }

        .content{
            margin-left:250;
            margin-right:250;
        }
        </style>
    </head>
<body>
<div class="content">
<h1>DeleSmell: Code Smell Detection Based on Deep Learning and Latent Semantic Analysis</h1>
<hr/>
<p style="text-align:justify">The presence of code smell may increase the risk of failure, make software difficult to maintain, and introduce potential technique debt in the future. Although many deep learning based works have been proposed to detect code smell, most of the existing works suffer from a unbalanced dataset and incomplete feature extraction. To this end, this paper proposes a novel deep-learning-based approach called <i>DeleSmell</i> to detect code smells.</p>
<p style="text-align:justify"> We develop an Eclipse plugin to automatically generate positive items for brain class/method code smell and then extract both structure-based and semantic-related information to generate the training dataset.
Structure-based information is obtained by iPlasma while semantic-related information is extracted via latent semantic analysis and word2vec. The training dataset is eventually fed into a deep learning model which is composed of a CNN branch and a GRU-Attention branch with a final classification process performed by an SVM. In the experimentation, <i>DeleSmell</i> is evaluated by answering six research questions.</p>

<p style="text-align:justify"> Experimental results show that the dataset generated by <i>DeleSmell</i> outperforms the existing
dataset. Furthermore, it improves the accuracy of code smell detection by 4.41% , which significantly improves the state-of-the-art. </p>


<h2>DeleSmell model and dataset</h2>
<hr/>
<h3>DeleSmell Model</h3>
<p style="text-align:justify">We show the deep learning model of <i>Delesmell</i> as the following code.</p>
<pre>
1 <code>units = 1</code>
2 <code>inp=Input(shape=(x_train.shape[1:]))</code>
</pre>

<p style="text-align:justify"></p>

<pre>
1  <code>x = Conv1D(32, 6, padding = "same", activation='tanh')(inp)</code>
2  <code>x = BatchNormalization()(x)</code>
3  <code>x = Conv1D(64, kernel_size=6, strides=1, padding='same',activation='relu')(x)</code>
4  <code>x = Conv1D(64, 6, strides=1, padding='same',activation='relu')(x)</code>
5  <code>x = LeakyReLU(alpha=0.33)(x)</code>
6  <code>x = Dropout(0.5)(x)</code>
7  <code>x = BatchNormalization()(x)</code>
8  <code>x = Conv1D(128, kernel_size=6, strides=1, padding='same',activation='relu')(x)</code>
9  <code>x = Conv1D(128, 6, strides=1, padding='same',activation='relu')(x)</code>
10 <code>x = LeakyReLU(alpha=0.33)(x)</code>
11 <code>x = Dropout(0.5)(x)</code>
12 <code>x = BatchNormalization()(x)</code>
13 <code>x = Conv1D(256, kernel_size=6, strides=1, padding='same',activation='relu')(x)</code>
14 <code>x = Conv1D(256, 6, strides=1, padding='same',activation='relu')(x)</code>
15 <code>x = LeakyReLU(alpha=0.33)(x)</code>
16 <code>x = BatchNormalization()(x)</code>
17 <code>x = Conv1D(512, kernel_size=6, strides=1, padding='same',activation='relu')(x)</code>
18 <code>x = Conv1D(512, 6, strides=1, padding='same',activation='relu')(x)</code>
19 <code>x = LeakyReLU(alpha=0.33)(x)</code>
20 <code>x = Dropout(0.5)(x)</code>
21 <code>x = BatchNormalization()(x)</code>
22 <code>x = Dropout(0.5)(x)</code>
23 <code>x = Dense(512,activation='relu',kernel_regularizer=regularizers.l2(0.001))(x)</code>
24 <code>g = Flatten()(x)</code>
</pre>

<p style="text-align:justify"></p>

<pre>
1 <code>activations = Bidirectional(GRU(units,return_sequences = True,dropout=0.2,recurrent_dropout=0.2))(inp)</code>
2 <code>attention = Dense(1,activation='tanh')(activations)</code>
3 <code>attention = Flatten()(attention)</code>
4 <code>attention = Activation('softmax')(attention)</code>
5 <code>attention = RepeatVector(units*2)(attention)</code>
6 <code>attention = Permute([2,1])(attention)</code>
7 <code>sent_representation = layers.Multiply()( [activations,attention])</code>
8 <code>sent_representation = layers.Lambda(lambda xin: K.sum(xin,axis=-2),output_shape=(units*2,))(sent_representation)</code>
</pre>
<p style="text-align:justify"></p>
<pre>
1 <code>l=Dense(128,activation="relu")(sent_representation)</code>
2 <code>l=Dropout(0.3)(l)</code>
3 <code>d = Flatten()(l)</code>
</pre>

<p style="text-align:justify"></p>
<pre>
1 <code>g2=concatenate([g,d],axis=1)</code>
2 <code>q=Dense(128)(g2)</code>
3 <code>q=LeakyReLU(alpha=0.33)(q)</code>
4 <code>q=LeakyReLU(alpha=0.33)(q)</code>
5 <code>q=LeakyReLU(alpha=0.33)(q)</code>
6 <code>q=Dropout(0.5)(q)</code>
7 <code>q=Dense(256,activation="tanh")(q)</code>
</pre>
<p style="text-align:justify"></p>
<pre>
1 <code>output = Dense(2, kernel_regularizer=tf.keras.regularizers.l2(0.01),activation='linear')(q)</code>
2 <code>model = Model(inputs=inp,outputs=output)</code>
</pre>

<h3>DeleSmell Dataset</h3>
<p style="text-align:justify">The source part of the dataset is available at the following URL <a href="https://zenodo.org/record/6433571#.YlKvW5FBxPY">dataset</a></p>

<h3>DeleSmell compares models and data</h3>
<p style="text-align:justify">The code and dataset for the <i>DeleSmell</i> feasibility comparison experiment are available at the following URL <a href="https://zenodo.org/record/6440198#.YlN05pFBxPY"><i>DeleSmell</i> compares models and data</a></p>
</div>
<img src="https://s01.flagcounter.com/count2/HbVu/bg_FFFFFF/txt_000000/border_CCCCCC/columns_4/maxflags_32/viewers_0/labels_1/pageviews_1/flags_0/percent_0/"  border="0">

</body>
</html>
